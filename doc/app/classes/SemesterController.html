<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: SemesterController</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">SemesterController</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/controllers/semester_controller_rb.html">
                app/controllers/semester_controller.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="ApplicationController.html">
                ApplicationController
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Controls creation, and manipulation of semesters. Semesters house all other
models in Greenword. They can be viewed as the highest level of
organization for the application. Some of the duplicating of a semester is
handled (incorrectly) here, while some of it is in the semester model
class.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000033">copy</a>&nbsp;&nbsp;
      <a href="#M000041">copy_classes</a>&nbsp;&nbsp;
      <a href="#M000040">copy_classes_from_section</a>&nbsp;&nbsp;
      <a href="#M000043">copy_current_user</a>&nbsp;&nbsp;
      <a href="#M000039">copy_sections</a>&nbsp;&nbsp;
      <a href="#M000042">create_new_forums</a>&nbsp;&nbsp;
      <a href="#M000038">duplicate</a>&nbsp;&nbsp;
      <a href="#M000034">edit</a>&nbsp;&nbsp;
      <a href="#M000031">index</a>&nbsp;&nbsp;
      <a href="#M000032">new</a>&nbsp;&nbsp;
      <a href="#M000036">set_current_semester</a>&nbsp;&nbsp;
      <a href="#M000037">update</a>&nbsp;&nbsp;
      <a href="#M000035">view</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000033" class="method-detail">
        <a name="M000033"></a>

        <div class="method-heading">
          <a href="#M000033" class="method-signature">
          <span class="method-name">copy</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets up the process of copying <a
href="SemesterController.html#M000038">duplicate</a> information to a <a
href="SemesterController.html#M000032">new</a> semester.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000033-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000033-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/semester_controller.rb, line 18</span>
18:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy</span>
19:   <span class="ruby-ivar">@old_semester</span> = <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
20:   <span class="ruby-comment cmt"># redirect_to :action =&gt; :index and return if @old_semester == nil</span>
21:   <span class="ruby-ivar">@semester</span> = <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">new</span>
22:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000038" class="method-detail">
        <a name="M000038"></a>

        <div class="method-heading">
          <a href="#M000038" class="method-signature">
          <span class="method-name">duplicate</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Used by the <a href="SemesterController.html#M000033">copy</a> method to <a
href="SemesterController.html#M000038">duplicate</a> information(instances)
from a previous semester.
</p>
<h1>Automatic Duplication:</h1>
<ul>
<li>blank Gallery and Discussion forums using <a
href="SemesterController.html#M000042">create_new_forums</a>

</li>
<li>Current admin user making the <a
href="SemesterController.html#M000038">duplicate</a> using <a
href="SemesterController.html#M000043">copy_current_user</a>

</li>
</ul>
<h1>Optional Automatic Duplication:</h1>
<ul>
<li>Sections(Groups) from old semester using <a
href="SemesterController.html#M000039">copy_sections</a>

</li>
<li>Courses(Classes) from old semester using <a
href="SemesterController.html#M000040">copy_classes_from_section</a>

</li>
</ul>
<p>
Previous semester must be valid to make a <a
href="SemesterController.html#M000033">copy</a>, and <a
href="SemesterController.html#M000032">new</a> semester must have been
sucessfully saved.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000038-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000038-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/semester_controller.rb, line 70</span>
 70:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">duplicate</span>
 71:    <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">request</span>.<span class="ruby-identifier">post?</span>)
 72:      <span class="ruby-identifier">old_semester</span> = <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
 73:      <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">old_semester</span>)
 74:        <span class="ruby-identifier">copy_classes_box</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:copy_classes</span>]
 75:        <span class="ruby-comment cmt"># puts &quot;Copy classes box: &quot;+copy_classes_box</span>
 76:        <span class="ruby-identifier">new_semester</span> = <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:semester</span>])
 77:        <span class="ruby-identifier">new_semester</span>.<span class="ruby-identifier">enrollable</span> = <span class="ruby-keyword kw">false</span>
 78:        <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">new_semester</span>.<span class="ruby-identifier">save</span>)
 79:          <span class="ruby-identifier">old_semester</span>.<span class="ruby-identifier">duplicate_test_sets</span>(<span class="ruby-identifier">new_semester</span>.<span class="ruby-identifier">id</span>)
 80:          <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-node">&quot;Semester #{old_semester.name} Duplicated, new semester created&quot;</span>
 81:          <span class="ruby-constant">Settings</span>.<span class="ruby-identifier">current_semester</span> = <span class="ruby-identifier">new_semester</span>.<span class="ruby-identifier">id</span>
 82:          <span class="ruby-comment cmt">#creates blank forums-- photo &amp; discussion</span>
 83:          <span class="ruby-identifier">create_new_forums</span>(<span class="ruby-identifier">new_semester</span>.<span class="ruby-identifier">id</span>)     
 84:          <span class="ruby-comment cmt"># copies current admin user to new semester</span>
 85:          <span class="ruby-identifier">copy_current_user</span>(<span class="ruby-identifier">new_semester</span>.<span class="ruby-identifier">id</span>)
 86:          
 87:          <span class="ruby-comment cmt"># if the checkbox is checked, copy old classes</span>
 88:          <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">copy_classes_box</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;1&quot;</span>)         
 89:            <span class="ruby-identifier">copy_sections</span>( <span class="ruby-identifier">old_semester</span>.<span class="ruby-identifier">id</span>,<span class="ruby-identifier">new_semester</span>.<span class="ruby-identifier">id</span>)
 90:          <span class="ruby-keyword kw">end</span>
 91:          <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:index</span>
 92:        <span class="ruby-keyword kw">else</span>
 93:          <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">&quot;Problem with attributes of new semeseter&quot;</span>
 94:          <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:new</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">old_semester</span>.<span class="ruby-identifier">id</span>
 95:        <span class="ruby-keyword kw">end</span>
 96:      <span class="ruby-keyword kw">else</span>
 97:        <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-value str">&quot;Old Semester not Valid&quot;</span>
 98:        <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:index</span>
 99:      <span class="ruby-keyword kw">end</span>
100:   <span class="ruby-keyword kw">end</span>
101:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000034" class="method-detail">
        <a name="M000034"></a>

        <div class="method-heading">
          <a href="#M000034" class="method-signature">
          <span class="method-name">edit</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Allows the modification of semester attributes like name and url
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000034-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000034-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/semester_controller.rb, line 25</span>
25:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">edit</span>
26:    <span class="ruby-ivar">@semester</span> = <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
27:    <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:index</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@semester</span>.<span class="ruby-identifier">nil?</span>
28:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000031" class="method-detail">
        <a name="M000031"></a>

        <div class="method-heading">
          <a href="#M000031" class="method-signature">
          <span class="method-name">index</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
List all semesters in the database
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000031-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000031-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/semester_controller.rb, line 8</span>
 8:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">index</span>
 9:    <span class="ruby-ivar">@semesters</span> = <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;created_on DESC&quot;</span>)
10:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000032" class="method-detail">
        <a name="M000032"></a>

        <div class="method-heading">
          <a href="#M000032" class="method-signature">
          <span class="method-name">new</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
allow the creation of a <a href="SemesterController.html#M000032">new</a>
semester. Probably want to use <a
href="SemesterController.html#M000033">copy</a> instead of <a
href="SemesterController.html#M000032">new</a>, as it copies information
from the old semester into the <a
href="SemesterController.html#M000032">new</a> semester which will
proabably be useful.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000032-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000032-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/semester_controller.rb, line 13</span>
13:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new</span>
14:    <span class="ruby-ivar">@semester</span> = <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">new</span>
15:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000036" class="method-detail">
        <a name="M000036"></a>

        <div class="method-heading">
          <a href="#M000036" class="method-signature">
          <span class="method-name">set_current_semester</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Changes the current semester kept in the current_semester Setting.
</p>
<p>
Future work is planned to change this configuration and instead allow for
semester setting based on the url. For example, fall06.greenword.net would
automatically acquire the fall 06 semester.
</p>
<p>
Thus, this method will probably not be used in the future.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000036-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000036-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/semester_controller.rb, line 40</span>
40:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_current_semester</span>
41:    <span class="ruby-constant">Settings</span>.<span class="ruby-identifier">current_semester</span> = <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
42:    <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:view</span>
43:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000037" class="method-detail">
        <a name="M000037"></a>

        <div class="method-heading">
          <a href="#M000037" class="method-signature">
          <span class="method-name">update</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Performs the actual <a href="SemesterController.html#M000037">update</a> of
a semester.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000037-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000037-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/semester_controller.rb, line 46</span>
46:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update</span>
47:    <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">post?</span>
48:      <span class="ruby-ivar">@semester</span> = <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:id</span>])
49:      <span class="ruby-keyword kw">unless</span>(<span class="ruby-ivar">@semester</span>.<span class="ruby-identifier">nil?</span>)
50: 
51:        <span class="ruby-keyword kw">if</span>(<span class="ruby-ivar">@semester</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:semester</span>]))
52:          <span class="ruby-identifier">flash</span>[<span class="ruby-identifier">:notice</span>] = <span class="ruby-node">&quot;#{@semester.name} updated&quot;</span>
53:          <span class="ruby-identifier">redirect_to</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:index</span>
54:        <span class="ruby-keyword kw">else</span>
55:          <span class="ruby-identifier">render</span> <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:edit</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@semester</span>.<span class="ruby-identifier">id</span>
56:        <span class="ruby-keyword kw">end</span>
57:      <span class="ruby-keyword kw">end</span>
58:    <span class="ruby-keyword kw">end</span>
59:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000035" class="method-detail">
        <a name="M000035"></a>

        <div class="method-heading">
          <a href="#M000035" class="method-signature">
          <span class="method-name">view</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Another <a href="SemesterController.html#M000031">index</a> like display
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000035-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000035-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/semester_controller.rb, line 31</span>
31:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">view</span>
32:    <span class="ruby-ivar">@semesters</span> = <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;created_on DESC&quot;</span>)
33:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Protected Instance methods</h3>

      <div id="method-M000041" class="method-detail">
        <a name="M000041"></a>

        <div class="method-heading">
          <a href="#M000041" class="method-signature">
          <span class="method-name">copy_classes</span><span class="method-args">(old_semester_id,current_semester_id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Not used anymore
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000041-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000041-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/semester_controller.rb, line 133</span>
133:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy_classes</span>(<span class="ruby-identifier">old_semester_id</span>,<span class="ruby-identifier">current_semester_id</span>)
134:    <span class="ruby-ivar">@semester</span> = <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">old_semester_id</span>)
135:    <span class="ruby-keyword kw">if</span>(<span class="ruby-ivar">@semester</span>)
136:      <span class="ruby-identifier">courses</span> = <span class="ruby-ivar">@semester</span>.<span class="ruby-identifier">courses</span>
137:      <span class="ruby-comment cmt"># puts &quot;Number of courses: &quot;+courses.size.to_s</span>
138:      <span class="ruby-identifier">courses</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">course</span><span class="ruby-operator">|</span>
139:        <span class="ruby-identifier">new_course</span> = <span class="ruby-constant">Course</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">course</span>.<span class="ruby-identifier">attributes</span>)
140:        <span class="ruby-identifier">new_course</span>.<span class="ruby-identifier">semester_id</span> = <span class="ruby-identifier">current_semester_id</span>
141:        <span class="ruby-identifier">new_course</span>.<span class="ruby-identifier">save</span>
142:      <span class="ruby-keyword kw">end</span>
143:    <span class="ruby-keyword kw">end</span>
144:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000040" class="method-detail">
        <a name="M000040"></a>

        <div class="method-heading">
          <a href="#M000040" class="method-signature">
          <span class="method-name">copy_classes_from_section</span><span class="method-args">(section, new_section)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Used in <a href="SemesterController.html#M000039">copy_sections</a> to
create <a href="SemesterController.html#M000032">new</a> courses with the
same information as the old ones and associate them with the correct copied
section.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000040-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000040-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/semester_controller.rb, line 122</span>
122:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy_classes_from_section</span>(<span class="ruby-identifier">section</span>, <span class="ruby-identifier">new_section</span>)
123:    <span class="ruby-identifier">old_courses</span> = <span class="ruby-identifier">section</span>.<span class="ruby-identifier">courses</span>
124:    <span class="ruby-identifier">old_courses</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">old_course</span><span class="ruby-operator">|</span>
125:      <span class="ruby-identifier">new_course</span> = <span class="ruby-constant">Course</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">old_course</span>.<span class="ruby-identifier">attributes</span>)
126:      <span class="ruby-identifier">new_course</span>.<span class="ruby-identifier">semester_id</span> = <span class="ruby-identifier">new_section</span>.<span class="ruby-identifier">semester_id</span>
127:      <span class="ruby-identifier">new_course</span>.<span class="ruby-identifier">section_id</span> = <span class="ruby-identifier">new_section</span>.<span class="ruby-identifier">id</span>
128:      <span class="ruby-identifier">new_course</span>.<span class="ruby-identifier">save</span>
129:    <span class="ruby-keyword kw">end</span>
130:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000043" class="method-detail">
        <a name="M000043"></a>

        <div class="method-heading">
          <a href="#M000043" class="method-signature">
          <span class="method-name">copy_current_user</span><span class="method-args">(current_semester_id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a <a href="SemesterController.html#M000038">duplicate</a> of the
user making the <a href="SemesterController.html#M000032">new</a> semester
so that someone can log in.
</p>
<p>
Currently, only the current user is duplicated for security reasons
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000043-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000043-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/semester_controller.rb, line 170</span>
170:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy_current_user</span>(<span class="ruby-identifier">current_semester_id</span>)
171:    <span class="ruby-ivar">@semester</span> = <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">current_semester_id</span>)
172:     <span class="ruby-keyword kw">if</span>(<span class="ruby-ivar">@semester</span>)
173:       <span class="ruby-identifier">new_user</span> = <span class="ruby-ivar">@current_user</span>.<span class="ruby-identifier">clone</span>
174:       <span class="ruby-identifier">new_user</span>.<span class="ruby-identifier">semester_id</span> = <span class="ruby-identifier">current_semester_id</span>
175:       <span class="ruby-identifier">new_user</span>.<span class="ruby-identifier">save!</span>
176:     <span class="ruby-keyword kw">end</span>
177:    
178:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000039" class="method-detail">
        <a name="M000039"></a>

        <div class="method-heading">
          <a href="#M000039" class="method-signature">
          <span class="method-name">copy_sections</span><span class="method-args">(old_semester_id, current_semester_id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Used in <a href="SemesterController.html#M000038">duplicate</a> method to
<a href="SemesterController.html#M000033">copy</a> old sections
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000039-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000039-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/semester_controller.rb, line 106</span>
106:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy_sections</span>(<span class="ruby-identifier">old_semester_id</span>, <span class="ruby-identifier">current_semester_id</span>)
107:     <span class="ruby-ivar">@semester</span> = <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">old_semester_id</span>)
108:     <span class="ruby-keyword kw">if</span>(<span class="ruby-ivar">@semester</span>)
109:       <span class="ruby-identifier">sections</span> = <span class="ruby-ivar">@semester</span>.<span class="ruby-identifier">sections</span>
110:       <span class="ruby-identifier">sections</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">section</span><span class="ruby-operator">|</span>
111:         <span class="ruby-identifier">new_section</span> = <span class="ruby-constant">Section</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">section</span>.<span class="ruby-identifier">attributes</span>)
112:         <span class="ruby-identifier">new_section</span>.<span class="ruby-identifier">semester_id</span> = <span class="ruby-identifier">current_semester_id</span>
113:         <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">new_section</span>.<span class="ruby-identifier">save</span>)
114:           <span class="ruby-identifier">copy_classes_from_section</span>(<span class="ruby-identifier">section</span>, <span class="ruby-identifier">new_section</span> )
115:         <span class="ruby-keyword kw">end</span>
116:       <span class="ruby-keyword kw">end</span>
117:       
118:     <span class="ruby-keyword kw">end</span>
119:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000042" class="method-detail">
        <a name="M000042"></a>

        <div class="method-heading">
          <a href="#M000042" class="method-signature">
          <span class="method-name">create_new_forums</span><span class="method-args">(current_semester_id)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates <a href="SemesterController.html#M000032">new</a> forums witht the
correct names for the <a href="SemesterController.html#M000032">new</a>
semester. This is to make it easier to start up the <a
href="SemesterController.html#M000032">new</a> semester
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000042-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000042-source">
<pre>
     <span class="ruby-comment cmt"># File app/controllers/semester_controller.rb, line 147</span>
147:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_new_forums</span>(<span class="ruby-identifier">current_semester_id</span>)
148:    <span class="ruby-ivar">@semester</span> = <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">current_semester_id</span>)
149:    <span class="ruby-keyword kw">if</span>(<span class="ruby-ivar">@semester</span>)
150:    <span class="ruby-comment cmt"># create discussion forum  </span>
151:      <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@semester</span>.<span class="ruby-identifier">forums</span>.<span class="ruby-identifier">find_discussion</span>.<span class="ruby-identifier">nil?</span>
152:        <span class="ruby-ivar">@discussion_forum</span> = <span class="ruby-constant">Forum</span>.<span class="ruby-identifier">new</span>( <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Discussion&quot;</span>, 
153:               <span class="ruby-identifier">:description</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;This is the Discussion Fourm&quot;</span>, <span class="ruby-identifier">:semester_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">current_semester_id</span>,
154:               <span class="ruby-identifier">:forum_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'dis'</span>)
155:        <span class="ruby-ivar">@discussion_forum</span>.<span class="ruby-identifier">save</span>
156:      <span class="ruby-keyword kw">end</span>   
157:      <span class="ruby-comment cmt">#create gallery forum</span>
158:      <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@semester</span>.<span class="ruby-identifier">forums</span>.<span class="ruby-identifier">find_photo</span>.<span class="ruby-identifier">nil?</span>
159:        <span class="ruby-ivar">@gallery_forum</span> = <span class="ruby-constant">Forum</span>.<span class="ruby-identifier">new</span>( <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Gallery&quot;</span>, 
160:                <span class="ruby-identifier">:description</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;This is the Gallery Fourm&quot;</span>, <span class="ruby-identifier">:semester_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">current_semester_id</span>,
161:                <span class="ruby-identifier">:forum_type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pho'</span>)
162:         <span class="ruby-ivar">@gallery_forum</span>.<span class="ruby-identifier">save</span>
163:      <span class="ruby-keyword kw">end</span>  
164:    <span class="ruby-keyword kw">end</span>
165:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>