<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: ApplicationController</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">ApplicationController</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/app/controllers/application_rb.html">
                app/controllers/application.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                ActionController::Base
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Filters added to this controller will be run for all controllers in the
application. Likewise, all the methods added will be available for all
controllers.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000150">admin?</a>&nbsp;&nbsp;
      <a href="#M000148">pages_for</a>&nbsp;&nbsp;
      <a href="#M000147">set_locale</a>&nbsp;&nbsp;
      <a href="#M000149">set_page</a>&nbsp;&nbsp;
      <a href="#M000146">set_semester</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name"><a href="AuthenticatedSystem.html">AuthenticatedSystem</a></span>
      </div>
    </div>

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000150" class="method-detail">
        <a name="M000150"></a>

        <div class="method-heading">
          <a href="#M000150" class="method-signature">
          <span class="method-name">admin?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
determines if the user is an admin or not. Not sure if this is currently
used
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000150-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000150-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/application.rb, line 52</span>
52:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">admin?</span>
53:    <span class="ruby-identifier">logged_in?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">admin?</span>
54:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000148" class="method-detail">
        <a name="M000148"></a>

        <div class="method-heading">
          <a href="#M000148" class="method-signature">
          <span class="method-name">pages_for</span><span class="method-args">(size, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Used in the forums to determin paginate settings. Originally written in the
Beast app.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000148-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000148-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/application.rb, line 39</span>
39:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pages_for</span>(<span class="ruby-identifier">size</span>, <span class="ruby-identifier">options</span> = {})
40:    <span class="ruby-identifier">default_options</span> = {<span class="ruby-identifier">:per_page</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>}
41:    <span class="ruby-identifier">options</span> = <span class="ruby-identifier">default_options</span>.<span class="ruby-identifier">merge</span> <span class="ruby-identifier">options</span>
42:    <span class="ruby-identifier">pages</span> = <span class="ruby-constant">Paginator</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">size</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:per_page</span>], (<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:page</span>]<span class="ruby-operator">||</span><span class="ruby-value">1</span>)
43:    <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">pages</span>
44:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000147" class="method-detail">
        <a name="M000147"></a>

        <div class="method-heading">
          <a href="#M000147" class="method-signature">
          <span class="method-name">set_locale</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Used to set the locale based on the users language preference. This is used
in the Globalize plugin system.
</p>
<pre>
 See the writeup in the translation method of the admin_controller for details on Globalize
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000147-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000147-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/application.rb, line 26</span>
26:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_locale</span>
27:   <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">logged_in?</span>)
28:     <span class="ruby-identifier">user</span> = <span class="ruby-ivar">@current_user</span>
29:     <span class="ruby-identifier">locale</span> = <span class="ruby-identifier">user</span>.<span class="ruby-identifier">language</span>
30:     <span class="ruby-keyword kw">if</span>(<span class="ruby-identifier">locale</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'es'</span>)
31:       <span class="ruby-constant">Locale</span>.<span class="ruby-identifier">set</span>(<span class="ruby-value str">&quot;es-CR&quot;</span>)
32:     <span class="ruby-keyword kw">else</span>
33:       <span class="ruby-constant">Locale</span>.<span class="ruby-identifier">set</span>(<span class="ruby-value str">&quot;en-US&quot;</span>)
34:     <span class="ruby-keyword kw">end</span>
35:   <span class="ruby-keyword kw">end</span>
36:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000149" class="method-detail">
        <a name="M000149"></a>

        <div class="method-heading">
          <a href="#M000149" class="method-signature">
          <span class="method-name">set_page</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Also used in the forums. Written by Beast
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000149-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000149-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/application.rb, line 47</span>
47:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_page</span>
48:    <span class="ruby-identifier">request</span>.<span class="ruby-identifier">session</span>[<span class="ruby-identifier">:prev_page</span>] = <span class="ruby-identifier">request</span>.<span class="ruby-identifier">request_uri</span>
49:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000146" class="method-detail">
        <a name="M000146"></a>

        <div class="method-heading">
          <a href="#M000146" class="method-signature">
          <span class="method-name">set_semester</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Determines the current semester for the application. The @semester variable
is used everywhere in the app to limit the effects of actions. Currently
this @semester is set using a value in the Settings which is controlled by
the &#8216;settings&#8217; plugin. Currently this is the only variable
controlled by the settings plugin.
</p>
<p>
Future plans for this method involve having it determine its value by
checking the first part of the url. So, if the url was something like
fall06.greenword.net then the semester would be set to the the one with the
url value of &#8216;fall06&#8216;
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000146-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000146-source">
<pre>
    <span class="ruby-comment cmt"># File app/controllers/application.rb, line 13</span>
13:  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_semester</span>  
14:    <span class="ruby-ivar">@semester</span>
15:    <span class="ruby-keyword kw">unless</span>(<span class="ruby-constant">Settings</span>.<span class="ruby-identifier">current_semester</span>.<span class="ruby-identifier">nil?</span>)
16:      <span class="ruby-ivar">@semester</span> = <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">find</span>(<span class="ruby-constant">Settings</span>.<span class="ruby-identifier">current_semester</span>) 
17:    <span class="ruby-keyword kw">else</span>
18:       <span class="ruby-ivar">@semester</span> =  <span class="ruby-constant">Semester</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>)
19:    <span class="ruby-keyword kw">end</span>
20:    <span class="ruby-ivar">@semester</span>
21:  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>